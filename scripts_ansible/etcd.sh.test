#!/usr/bin/env bash


#Assuming kubelet/kubectl/kubeadm have been already installed by Ansible using any package manager

KUBE_CONF=./test.conf
count=0
#for i in ${@}; do

#	eval "HOST$count=$i";

#count=$(( $count + 1 ))
#done


test_array=(${@})


for i in ${test_array[@]}
do 
	HOST[*=$i
done





#Creating Kubelet config with higher priority

cat << EOF > ${KUBE_CONF}

[Service]
ExecStart=
ExecStart=/usr/bin/kubelet --address=127.0.0.1 --pod-manifest-path=/etc/kubernetes/manifests
Restart=always
EOF

#TODO maybe it's better to reload/restart via Ansible notify





